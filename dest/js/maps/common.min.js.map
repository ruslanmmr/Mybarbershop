{"version":3,"sources":["common.js"],"names":["$","document","ready","lazy","tooltip","nav","cityBlock","slider","gallery","modalMagnificBasket","innerWidth","window","cursorcolorVar","cursorwidthVar","cursorborderVar","cursorborderradiusVar","zindexVar","inputVal","state","flag","openbutton","textInput","list","scrollStart","scrollTop","scrollEnd","item","falseText","toggleClass","hasClass","addClass","val","searchCity","fadeIn","cursorwidth","cursorborder","cursorborderradius","zindex","bouncescroll","bouncescrollVar","autohidemode","getNiceScroll","resize","removeClass","fadeOut","toLowerCase","attr","search","value","length","on","e","setTimeout","toggleModal","is","target","has","children","scroll","cover","th","this","height","tw","width","im","ih","each","navButton","navLink","scrollLink","overlay","hide","event","preventDefault","navState","click","scrollLock","show","top","id","offset","animate","Lazy","visibleOnly","threshold","tooltipster","theme","trigger","animationDuration","effect","effectTime","mouseenter","triggerClose","touchleave","mouseleave","trackerInterval","triggerOpen","touchstart","slideCount","slideCount768","slideCount420","dots","slideCount992","slideCount576","slideCount1200","arrows","slick","infinite","settings","slidesToShow","slidesToScroll","breakpoint","margin","css","row","block","magnificPopup","mainClass","close"],"mappings":"aAAAA,EAAEC,UAAUC,MAAM,WAChBC,OADAF,UACAE,MACAC,YACAC,SACAC,UACAC,QACAC,wBAEAC,EAAAA,QAAAA,OAAAA,WARFC,WAAAV,EAAA,QAAAU,aAUEC,UACAD,UAMF,IAAIA,WAAaV,EAAE,QAAQU,aACvBE,eAAA,OACAA,eAAiB,MACjBC,gBAAiB,IACjBC,sBAJJ,IAKIC,UAAAA,CAAAA,KACAC,iBANJ,EAWA,SAASV,YACP,IAAAW,EAAAC,EAAAC,EAAIC,EAAapB,EAAE,uBAAnBqB,EACAA,EAAS,uBADTC,EAEAA,EAAI,sBAFJhB,EAGAA,EAAS,gBAHTiB,EAIAA,EAAW,cAAKC,YAJhBC,EAKAA,EAAS,cAAKD,YALdE,EAMAA,EAAI,2BANJC,EAOAA,EAAS,8BAgDPJ,SAAAA,IACAjB,EAAUsB,EAAAA,cAAYJ,YAAtBlB,EAAUsB,YAAY,uBAClBtB,EAAUuB,SAAS,wBACrBT,EAAWU,SAAS,wBACpBT,EAAUU,IAAI,IACdC,IACA1B,EAAU2B,OAAO,KACjBf,GAAQ,EAlBRgB,EAAAA,WAAarB,CACbsB,YAAYvB,eACZwB,YAAAA,eACAC,aAAQrB,gBACRsB,mBAAcC,sBACdC,OAAAA,UAPFF,aAAAC,gBASDC,cAAA,IAaGlB,EAAKmB,gBAAgBC,WAErBtB,EAAWuB,YAAY,wBACvBrC,EAAUsC,QAAQ,KAClB1B,GAAQ,GAKZ,SAASc,IACcD,IADvBd,EAASe,EAAaD,MAAAc,eACTxB,QAETK,EAAKiB,YAAY,4BADnBjB,EAAIT,KAAQ,YAEY,GADjB0B,EAAAA,MAAYG,KAAA,aAAAD,cACPE,OAAA9B,IACR+B,EAAAA,MAAUlB,SAAMgB,8BAEd9C,EAAQ8B,oDAARmB,OACD,EAJHtB,EAAAG,SAAA,4BAUEH,EAAUgB,YAAY,8BADvBjB,EAFDI,SAEO,4BACLH,EAAAA,YAAUgB,6BAEbrB,EAdDmB,gBAcOC,SAzEPV,EAAAA,MAAU,WADZA,MAMIb,EAAAA,UAAO+B,GAAP,mBAAA,SAAAC,GACAC,IACEjC,GAAI,EACLiC,WAFD,WACEjC,GAAO,GAET,MACEkC,EAAWC,GAAAH,EAAAI,SAAA,IAAAjD,EAAAkD,IAAAL,EAAAI,QAAAN,QAAA3C,EAAAuB,SAAA,uBADbwB,KAGEA,EAAWC,GAAAH,EAAAI,SAAAnC,EAAAqC,WAAAH,GAAAH,EAAAI,UACZF,OAILrD,EAAEW,QAAQ+C,OAAO,WAEfjC,EAAMA,EAAS,cAAeD,aACjBD,EAAA,IAAX8B,GAAW5B,EAAAF,EAAA,MAAA,GAAAL,GACZmC,MA4DL,SAASM,QAJLrC,EAAAA,cAAKmB,KAAL,WAOA,IAAImB,EAAK5D,EAAE6D,MAAMC,SANlBC,EAAA/D,EAAA6D,MAAAG,QAEHC,EAAAjE,EAAA6D,MAAAJ,SAAA,OAOQS,EAAKD,EAAGH,SACHG,EAAGD,QAPCE,GAARP,EAAAA,EACLM,EAAAnC,SAAcqC,MAAKxB,YAAW,MAE1BiB,EAAE9B,SAAG,MAAQgC,YAAjB,QAGII,SAAKD,MAHT,IAAAG,EAIYJ,EAAAA,6CAYZ3D,EAAML,EAAE,QAXRqE,EAAQT,EAAJ,cACAK,EAAGnC,EAAAA,YACNwC,EAAMtE,EAAA,gBAQT,SAAIoE,IACF/D,EAAML,SADR,eAEEqE,EAAOpC,OAAK,KACZsC,WAAWC,KAACxE,EAAA,SACZsE,EAAAA,SAAUxC,SAAK,gBAGf2C,EAAMC,QAAAA,KACNrE,WAAIuB,KAAY5B,EAAA,SAChB2E,EAAAA,SAAQhC,YAAA,eAfPyB,EAAAQ,MAAA,SAAAH,GAXHA,EAAAC,iBAeFrE,EAAAuB,YAAA,cAWI+C,MAGF3E,EAAAW,QAASgE,OAAT,WACmB,IAAbtE,aACFkE,EAAAA,YAAe,cACfM,OAGAN,EAAAA,GAAO,QAAS,WAChBM,WAAWC,MACX9E,EAAE2C,YAASA,cACZgC,OAICtE,EAAIsC,MAAAA,SAAY8B,GAChBE,IAAAA,EAAAA,EAAQd,MAAAf,KAAA,QACTiC,EAAA/E,EAAAgF,GAAAC,SAAAF,IAJHN,EAAAC,iBAOEhE,WAAa,KACXL,EAAIsC,YAAY,cAChBgC,IACDvB,WAAA,WAGHpD,EAAA,aAAAkF,QAAA,CAWQ1D,UAAWuD,GAVRH,MACH,MAEJH,EAAMC,aAAAA,QAAN,CAYIlD,UAAWuD,GAVdrE,OAKGc,SAAAA,OADqBxB,EAAA,SAElBmF,KAFL,CAGCC,aAJH,EAKCC,UAAM,GACLrF,OAAE,SACAwB,WAAAA,QAIT,SACDpB,UAWEJ,EAAE,YAAYsF,YAAY,CACxBC,MAAO,oBAXXC,QAASrF,SACLsF,kBAAc,IACdL,gBADc,IAEdC,YAFc,CAGdK,OAAQ,EACRC,YAAY,EAJdC,YAAA,GAmBEC,aAAc,CACZjB,OAAO,EAZbkB,YAAA,EACIC,YAAYT,KAIZU,SAAAA,SACAC,IAAAA,EAAWjG,EAAE,WACGO,EAAA2C,GAAA,OAAA,WACdgD,EAAAA,MAAAA,SAAY,oBAiBhB3F,EAAO4D,KAAK,WAnBG,IALWgC,EAAA,EAUxBN,EAAc,EACZjB,EADY,EACEwB,EAAA,EACdN,EAFY,EAEMO,EAAA,EAClBN,GAAU,EAmBRO,GAAO,EAhCbtG,EAAA6D,MAAAhC,SAAA,iBAgBDyE,GAAA,GACDtG,EAASO,MAATsB,SAAkB,mBACZtB,GAASP,GAGTA,EAAA6D,MAAM/B,SAAS,4BADnBqE,EAAA,EAIA5F,EAAY,EACVgG,EAAA,EAAAH,EACkB,EADlBI,EAEiB,EAFjBH,EAGiB,GAHjBrG,EAKIqG,MAAAA,SAAgB,qBALpBI,EAAAN,EAMa,EAoBXI,EAAgB,EAjBlBH,EAAWvE,EAEVwE,EADCC,EAAA,GAGAI,EAAAA,MAAMC,MAAG,CACVC,UAAA,EAoBCN,KAAMA,EAnBRI,OAAIA,EACFP,MAAAA,IACAM,aAAcN,EACdI,eAAgBJ,EAChBC,WAAAA,CACAI,CACAH,WAAgB,KACjBQ,SAAA,CAqBOC,aAAcL,EApBjBM,eAAeN,IAGlBF,CACAH,WAAgB,IAChBI,SAAa,CACbH,aAAAE,EACDQ,eAAAR,IAGCK,CACII,WAFQ,IAGZN,SAHY,CAIPI,aAJOV,EAKZU,eAAcX,IAIVa,CACAH,WAAU,IACRC,SAAAA,CACAC,aAAgBN,EAFRM,eAAAP,IAOVK,CACEC,WAAY,IACZC,SAAAA,CAFQD,aAAAT,EAKZU,eAAAV,SASEQ,SAAAA,UACEC,IAHJG,EAGIH,EAAAA,EAAAA,mCACAC,EAAAA,EAAAA,kBAFQ/G,EAAA,wBAOF,IAAR6G,YACEC,EAAAA,IAAAA,aAAcT,KACdU,EAAAA,KAAAA,WAFQE,GAAAjH,EAAA6D,MAAAC,SAAA,EA/BF9D,EAAA6D,MAAAqD,IAAA,aAAAD,OAwClBE,EAAAD,IAAA,aAAA,KAeIE,EAAMjD,KAAK,WACT8C,GAAWjH,EAAE6D,MAAMC,SAAW,EAfpC9D,EAAA6D,MAASrD,IAAT,aAAmByG,MAqBnB,SAASxG,sBAfPT,EAAA,eAAcqH,cAAK,CACjBD,gBAAU,EACVD,cAAS,EACLF,iBAAa,EACbjH,aAAY,IACfsH,UAHD,aAKAH,EAAAA,gBAAQvC,MAAc,WACtBwC,EAAAA,cAAWG","file":"../common.min.js","sourcesContent":["$(document).ready(function () {\r\n  lazy();\r\n  tooltip();\r\n  nav();\r\n  cityBlock();\r\n  slider();\r\n  gallery();\r\n  cover();\r\n  modalMagnificBasket();\r\n});\r\n$(window).resize(function () {\r\n  innerWidth = $('body').innerWidth();\r\n  gallery();\r\n  cover();\r\n});\r\n\r\n//global variables\r\nvar innerWidth = $('body').innerWidth(),\r\n    //scroll-styling\r\n    cursorcolorVar = \"#fff\",\r\n    cursorwidthVar = \"7px\",\r\n    cursorborderVar = \"0\",\r\n    cursorborderradiusVar = \"0\",\r\n    zindexVar = [100],\r\n    bouncescrollVar = false;\r\n    //\r\n\r\n//city-block\r\nfunction cityBlock() {\r\n  var openbutton = $(\".sub-nav__link_city\"),\r\n  textInput = $('.search-city__input'),\r\n  list = $('.search-city__list'),\r\n  cityBlock = $(\".search-city\"),\r\n  scrollStart = $(\"html, body\").scrollTop(),\r\n  scrollEnd = $(\"html, body\").scrollTop(),\r\n  item = $(\".search-city__item_city\"),\r\n  falseText = $(\".search-city__item_nothing\"),\r\n  inputVal,\r\n  value,\r\n  quantity,\r\n  state,\r\n  flag;\r\n\r\n  //события\r\n  textInput.keyup(function () {\r\n    searchCity();\r\n  });\r\n\r\n  $(document).on('click touchstart', function (e) {\r\n    if (!flag) {\r\n      flag = true;\r\n      setTimeout(function () {\r\n        flag = false;\r\n      }, 300);\r\n      if (!cityBlock.is(e.target) && cityBlock.has(e.target).length === 0 && cityBlock.hasClass(\"search-city_visible\")) {\r\n        toggleModal();\r\n      } else if (openbutton.is(e.target) || openbutton.children().is(e.target)) {\r\n        toggleModal();\r\n      } \r\n    }\r\n  });\r\n\r\n  $(window).scroll(function () {\r\n    scrollEnd = $(\"html, body\").scrollTop();\r\n    if (((scrollEnd > (scrollStart + 100)) || ((scrollEnd < (scrollStart - 100)))) && state == true) {\r\n      toggleModal();\r\n    }\r\n  });\r\n\r\n  //функции\r\n  function scrollInit() {\r\n    list.niceScroll({\r\n      cursorcolor: cursorcolorVar,\r\n      cursorwidth: cursorwidthVar,\r\n      cursorborder: cursorborderVar,\r\n      cursorborderradius: cursorborderradiusVar,\r\n      zindex: zindexVar,\r\n      bouncescroll: bouncescrollVar,\r\n      autohidemode: false\r\n    });\r\n  };\r\n\r\n  //открытие или закрытие модалки\r\n  function toggleModal() {\r\n    scrollStart = $(\"html, body\").scrollTop();\r\n    cityBlock.toggleClass(\"search-city_visible\");\r\n    if (cityBlock.hasClass(\"search-city_visible\")) {\r\n      openbutton.addClass('mobile-button_active');\r\n      textInput.val(\"\");\r\n      searchCity();\r\n      cityBlock.fadeIn(300);\r\n      state = true;\r\n      scrollInit();\r\n      list.getNiceScroll().resize();\r\n    } else {\r\n      openbutton.removeClass('mobile-button_active');\r\n      cityBlock.fadeOut(300);\r\n      state = false;\r\n    }\r\n  };\r\n\r\n  //поиск\r\n  function searchCity() {\r\n    inputVal = textInput.val().toLowerCase();\r\n    if (inputVal.length >= 1) {\r\n      item.removeClass(\"search-city__item_active\");\r\n      item.each(function () {\r\n        value = $(this).attr('data-city').toLowerCase();\r\n        if (value.search(inputVal) != -1) {\r\n          $(this).addClass('search-city__item_active');\r\n        } \r\n      })\r\n      quantity = $(\".search-city__item_city.search-city__item_active\").length;\r\n      if (quantity < 1) {\r\n        falseText.addClass(\"search-city__item_active\");\r\n      } else {\r\n        falseText.removeClass(\"search-city__item_active\");\r\n      }\r\n    } else {\r\n      item.addClass(\"search-city__item_active\");\r\n      falseText.removeClass(\"search-city__item_active\");\r\n    }\r\n    list.getNiceScroll().resize();\r\n  };\r\n}\r\n//image-cover-box\r\nfunction cover() {\r\n  $('.cover-box').each(function() {\r\n    //set size\r\n    var th = $(this).height(),//box height\r\n        tw = $(this).width(),//box width\r\n        im = $(this).children('img'),//image\r\n        ih = im.height(),\r\n        iw = im.width();\r\n    if ((tw/th) >= (iw/ih)) {\r\n        im.addClass('ww').removeClass('wh');\r\n    } else {\r\n        im.addClass('wh').removeClass('ww');\r\n    }\r\n  });\r\n}\r\n\r\n//nav\r\nfunction nav() {\r\n  var navButton = $('.sub-nav__nav-open, .nav__close, .overlay'),\r\n    nav = $('.nav'),\r\n    navLink = $('.nav__link'),\r\n    overlay = $('.overlay'),\r\n    scrollLink = $('.scroll-link');\r\n\r\n  navButton.click(function (event) {\r\n    event.preventDefault();\r\n    nav.toggleClass('nav_active');\r\n    navState();\r\n  })\r\n  \r\n  function navState() {\r\n    if (nav.hasClass('nav_active')) {\r\n      overlay.fadeIn(300);\r\n      scrollLock.hide($(\"body\"));\r\n      $('.page').addClass('page_fixed');\r\n    } else {\r\n      overlay.fadeOut(300);\r\n      scrollLock.show($(\"body\"));\r\n      $('.page').removeClass('page_fixed');\r\n    }\r\n  }\r\n  $(window).resize(function () {\r\n    if (innerWidth > 992) {\r\n      nav.removeClass('nav_active');\r\n      navState();\r\n    }\r\n  });\r\n  navLink.on('click', function () {\r\n    if(innerWidth < 993) {\r\n      nav.removeClass('nav_active');\r\n      navState();\r\n    }\r\n  })\r\n\r\n  //якорные ссылки\r\n  scrollLink.click(function (event) {\r\n    var id = $(this).attr('href'),\r\n      top = $(id).offset().top;\r\n      event.preventDefault();\r\n\r\n    if(innerWidth < 993) {\r\n      nav.removeClass('nav_active');\r\n      navState();\r\n      setTimeout(function () {\r\n        $('body,html').animate({\r\n          scrollTop: top\r\n          }, 400);\r\n        }, 300)\r\n      } else {\r\n        $('body,html').animate({\r\n          scrollTop: top\r\n        }, 400);\r\n      }\r\n  })\r\n}\r\n//lazy\r\nfunction lazy() {\r\n  $(\".lazy\").Lazy({\r\n    visibleOnly: true,\r\n    threshold: '',\r\n    effect: 'fadeIn',\r\n    effectTime: '300'\r\n  });\r\n}\r\n//tooltips\r\nfunction tooltip() {\r\n  $('.tooltip').tooltipster({\r\n    theme: 'tooltipster-light',\r\n    trigger:'custom',\r\n    animationDuration: 100,\r\n    trackerInterval: 100,\r\n    triggerOpen: {\r\n      click: true,  // For mouse\r\n      touchstart: true, // For touch device\r\n      mouseenter: true    // For touch device\r\n    },\r\n    triggerClose: {\r\n      click: true,  // For mouse\r\n      touchleave: true, // For touch device\r\n      mouseleave: true // For mouse\r\n    }\r\n  });\r\n}\r\nfunction slider() {\r\n  var slider = $('.slider');\r\n\r\n  slider.on('init', function () {\r\n    $(this).addClass('slider_visible')\r\n  });\r\n  \r\n  slider.each(function() {\r\n    var slideCount = 1,\r\n        slideCount1200 = 1,\r\n        slideCount992 = 1,\r\n        slideCount768 = 1,\r\n        slideCount576 = 1,\r\n        slideCount420 = 1,\r\n        arrows = false,\r\n        dots = false;\r\n\r\n    if($(this).hasClass('slider_dots')) {\r\n      dots = true;\r\n    }\r\n    if($(this).hasClass('slider_arrows')) {\r\n      arrows = true;\r\n    }\r\n    if($(this).hasClass('recommendations-slider')) {\r\n      slideCount = 6;\r\n      slideCount1200 = 5;\r\n      slideCount992 = 4;\r\n      slideCount768 = 3;\r\n      slideCount576 = 2;\r\n      slideCount420 = 1;\r\n    }\r\n    if($(this).hasClass('barbers__slider')) {\r\n      slideCount = 4;\r\n      slideCount1200 = 4;\r\n      slideCount992 = 3;\r\n      slideCount768 = 2;\r\n      slideCount576 = 1;\r\n      slideCount420 = 1;\r\n    }\r\n\r\n    $(this).slick({\r\n      infinite: true,\r\n      dots: dots,\r\n      arrows: arrows,\r\n      speed: 600,\r\n      slidesToShow: slideCount,\r\n      slidesToScroll: slideCount,\r\n      responsive: [\r\n        {\r\n          breakpoint: 1200,\r\n          settings: {\r\n            slidesToShow: slideCount1200,\r\n            slidesToScroll: slideCount1200\r\n          }\r\n        },\r\n        {\r\n          breakpoint: 992,\r\n          settings: {\r\n            slidesToShow: slideCount992,\r\n            slidesToScroll: slideCount992\r\n          }\r\n        },\r\n        {\r\n          breakpoint: 768,\r\n          settings: {\r\n            slidesToShow: slideCount768,\r\n            slidesToScroll: slideCount768\r\n          }\r\n        },\r\n        {\r\n          breakpoint: 576,\r\n          settings: {\r\n            slidesToShow: slideCount576,\r\n            slidesToScroll: slideCount576\r\n          }\r\n        },\r\n        {\r\n          breakpoint: 420,\r\n          settings: {\r\n            slidesToShow: slideCount420,\r\n            slidesToScroll: slideCount420\r\n          }\r\n        }\r\n      ]\r\n    });\r\n  });\r\n}\r\n//gallery\r\nfunction gallery() {\r\n  var row = $('.gallery__row:not(:first-child)'),\r\n      block = $('.gallery-block'),\r\n      title = $('.gallery-block_title'),\r\n      margin;\r\n\r\n  if(innerWidth>576) {\r\n    block.css('margin-top', '0');\r\n    row.each(function() {\r\n        margin = -($(this).height() / 2);\r\n        $(this).css('margin-top', margin);\r\n    }) \r\n  } else {\r\n    row.css('margin-top', '0');\r\n    block.each(function() {\r\n      margin = -($(this).height() / 2);\r\n      $(this).css('margin-top', margin);\r\n    })\r\n  }\r\n}\r\n//popup\r\nfunction modalMagnificBasket() {\r\n  $('.popup_link').magnificPopup({\r\n    closeBtnInside: false,\r\n    showCloseBtn: false,\r\n    fixedContentPos: true,\r\n    removalDelay: 300,\r\n    mainClass: 'mfp-fade'\r\n  });\r\n  $('.popup-close').click(function() {\r\n    $.magnificPopup.close();\r\n});\r\n}"]}