{"version":3,"sources":["common.js"],"names":["$","document","ready","lazy","tooltip","cityBlock","innerWidth","cursorcolorVar","cursorwidthVar","cursorborderVar","cursorborderradiusVar","zindexVar","inputVal","flag","openbutton","textInput","list","scrollStart","scrollTop","scrollEnd","item","falseText","toggleClass","hasClass","addClass","val","searchCity","fadeIn","cursorwidth","cursorborder","cursorborderradius","zindex","bouncescroll","bouncescrollVar","autohidemode","getNiceScroll","resize","removeClass","fadeOut","toLowerCase","attr","search","value","length","on","e","setTimeout","toggleModal","is","target","has","children","window","scroll","state","navButton","nav","navLink","overlay","navState","event","preventDefault","hide","scrollLock","click","Lazy","visibleOnly","threshold","effect","effectTime","tooltipster","trigger","animationDuration","trackerInterval","triggerOpen","tap","theme","mouseleave"],"mappings":"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","file":"../common.min.js","sourcesContent":["$(document).ready(function () {\r\n  lazy();\r\n  tooltip();\r\n  nav();\r\n  cityBlock();\r\n});\r\n$(window).resize(function () {\r\n  innerWidth = $('body').innerWidth();\r\n});\r\n\r\n//global variables\r\nvar innerWidth = $('body').innerWidth(),\r\n    //scroll-styling\r\n    cursorcolorVar = \"#fff\",\r\n    cursorwidthVar = \"7px\",\r\n    cursorborderVar = \"0\",\r\n    cursorborderradiusVar = \"0\",\r\n    zindexVar = [100],\r\n    bouncescrollVar = false;\r\n    //\r\n\r\n//city-block\r\nfunction cityBlock() {\r\n  var openbutton = $(\".sub-nav__link_city\"),\r\n  textInput = $('.search-city__input'),\r\n  list = $('.search-city__list'),\r\n  cityBlock = $(\".search-city\"),\r\n  scrollStart = $(\"html, body\").scrollTop(),\r\n  scrollEnd = $(\"html, body\").scrollTop(),\r\n  item = $(\".search-city__item_city\"),\r\n  falseText = $(\".search-city__item_nothing\"),\r\n  inputVal,\r\n  value,\r\n  quantity,\r\n  flag;\r\n\r\n  //события\r\n  textInput.keyup(function () {\r\n    searchCity();\r\n  });\r\n\r\n  $(document).on('click touchstart', function (e) {\r\n    if (!flag) {\r\n      flag = true;\r\n      setTimeout(function () {\r\n        flag = false;\r\n      }, 300);\r\n      if (!cityBlock.is(e.target) && cityBlock.has(e.target).length === 0 && cityBlock.hasClass(\"search-city_visible\")) {\r\n        toggleModal();\r\n      } else if (openbutton.is(e.target) || openbutton.children().is(e.target)) {\r\n        toggleModal();\r\n      } \r\n    }\r\n  });\r\n\r\n  $(window).scroll(function () {\r\n    scrollEnd = $(\"html, body\").scrollTop();\r\n    if (((scrollEnd > (scrollStart + 100)) || ((scrollEnd < (scrollStart - 100)))) && state == true) {\r\n      toggleModal();\r\n    }\r\n  });\r\n\r\n  //функции\r\n  function scrollInit() {\r\n    list.niceScroll({\r\n      cursorcolor: cursorcolorVar,\r\n      cursorwidth: cursorwidthVar,\r\n      cursorborder: cursorborderVar,\r\n      cursorborderradius: cursorborderradiusVar,\r\n      zindex: zindexVar,\r\n      bouncescroll: bouncescrollVar,\r\n      autohidemode: false\r\n    });\r\n  };\r\n\r\n  //открытие или закрытие модалки\r\n  function toggleModal() {\r\n    scrollStart = $(\"html, body\").scrollTop();\r\n    cityBlock.toggleClass(\"search-city_visible\");\r\n    if (cityBlock.hasClass(\"search-city_visible\")) {\r\n      openbutton.addClass('mobile-button_active');\r\n      textInput.val(\"\");\r\n      searchCity();\r\n      cityBlock.fadeIn(300);\r\n      scrollInit();\r\n      list.getNiceScroll().resize();\r\n    } else {\r\n      openbutton.removeClass('mobile-button_active');\r\n      cityBlock.fadeOut(300);\r\n    }\r\n  };\r\n\r\n  //поиск\r\n  function searchCity() {\r\n    inputVal = textInput.val().toLowerCase();\r\n    if (inputVal.length >= 1) {\r\n      item.removeClass(\"search-city__item_active\");\r\n      item.each(function () {\r\n        value = $(this).attr('data-city').toLowerCase();\r\n        if (value.search(inputVal) != -1) {\r\n          $(this).addClass('search-city__item_active');\r\n        } \r\n      })\r\n      quantity = $(\".search-city__item_city.search-city__item_active\").length;\r\n      if (quantity < 1) {\r\n        falseText.addClass(\"search-city__item_active\");\r\n      } else {\r\n        falseText.removeClass(\"search-city__item_active\");\r\n      }\r\n    } else {\r\n      item.addClass(\"search-city__item_active\");\r\n      falseText.removeClass(\"search-city__item_active\");\r\n    }\r\n    list.getNiceScroll().resize();\r\n  };\r\n}\r\n\r\n//nav\r\nfunction nav() {\r\n  var navButton = $('.sub-nav__nav-open, .nav__close, .overlay'),\r\n    nav = $('.nav'),\r\n    navLink = $('.nav__link'),\r\n    overlay = $('.overlay');\r\n\r\n  navButton.click(function (event) {\r\n    event.preventDefault();\r\n    nav.toggleClass('nav_active');\r\n    navState();\r\n  })\r\n  \r\n  function navState() {\r\n    if (nav.hasClass('nav_active')) {\r\n      overlay.fadeIn(300);\r\n      scrollLock.hide($(\"body\"));\r\n      $('body').addClass('body_fixed');\r\n    } else {\r\n      overlay.fadeOut(300);\r\n      scrollLock.show($(\"body\"));\r\n      $('body').removeClass('body_fixed');\r\n    }\r\n  }\r\n  $(window).resize(function () {\r\n    if (innerWidth > 992) {\r\n      nav.removeClass('nav_active');\r\n      navState();\r\n    }\r\n  });\r\n  \r\n  navLink.on('click', function () {\r\n    if(innerWidth < 993) {\r\n      nav.removeClass('nav_active');\r\n      navState();\r\n    }\r\n  })\r\n}\r\n\r\n//lazy\r\nfunction lazy() {\r\n  $(\".lazy\").Lazy({\r\n    visibleOnly: true,\r\n    threshold: '',\r\n    effect: 'fadeIn',\r\n    effectTime: '300'\r\n  });\r\n}\r\n//tooltips\r\nfunction tooltip() {\r\n  $('.tooltip').tooltipster({\r\n    theme: 'tooltipster-light',\r\n    trigger:'custom',\r\n    animationDuration: 200,\r\n    trackerInterval: 300,\r\n    triggerOpen: {\r\n      click: true,  // For mouse\r\n      tap: true, // For touch device\r\n      mouseenter: true    // For touch device\r\n    },\r\n    triggerClose: {\r\n      click: true,  // For mouse\r\n      tap: true, // For touch device\r\n      touchmove: true, // For touch device\r\n      mouseleave: true // For mouse\r\n    }\r\n  });\r\n}"]}