{"version":3,"sources":["common.js"],"names":["$","document","ready","lazy","tooltip","nav","cityBlock","slider","cover","resize","innerWidth","window","cursorcolorVar","cursorwidthVar","cursorborderVar","cursorborderradiusVar","zindexVar","inputVal","state","flag","openbutton","textInput","list","scrollStart","scrollTop","scrollEnd","item","falseText","toggleClass","hasClass","addClass","val","searchCity","fadeIn","cursorwidth","cursorborder","cursorborderradius","zindex","bouncescroll","bouncescrollVar","autohidemode","getNiceScroll","removeClass","fadeOut","toLowerCase","attr","search","value","length","on","e","setTimeout","toggleModal","is","target","has","children","scroll","th","this","height","tw","width","im","ih","each","navButton","navLink","hide","overlay","event","preventDefault","navState","scrollLock","Lazy","visibleOnly","effect","tooltipster","theme","trigger","animationDuration","threshold","effectTime","mouseenter","triggerClose","click","touchleave","mouseleave","trackerInterval","triggerOpen","touchstart","slideCount","slideCount768","slideCount420","dots","slideCount992","slideCount576","slideCount1200","arrows","slick","infinite","settings","slidesToShow","slidesToScroll","breakpoint","margin","css","row","block","gallery"],"mappings":"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","file":"../common.min.js","sourcesContent":["$(document).ready(function () {\r\n  lazy();\r\n  tooltip();\r\n  nav();\r\n  cityBlock();\r\n  slider();\r\n  gallery();\r\n  cover();\r\n});\r\n$(window).resize(function () {\r\n  innerWidth = $('body').innerWidth();\r\n  gallery();\r\n  cover();\r\n});\r\n\r\n//global variables\r\nvar innerWidth = $('body').innerWidth(),\r\n    //scroll-styling\r\n    cursorcolorVar = \"#fff\",\r\n    cursorwidthVar = \"7px\",\r\n    cursorborderVar = \"0\",\r\n    cursorborderradiusVar = \"0\",\r\n    zindexVar = [100],\r\n    bouncescrollVar = false;\r\n    //\r\n\r\n//city-block\r\nfunction cityBlock() {\r\n  var openbutton = $(\".sub-nav__link_city\"),\r\n  textInput = $('.search-city__input'),\r\n  list = $('.search-city__list'),\r\n  cityBlock = $(\".search-city\"),\r\n  scrollStart = $(\"html, body\").scrollTop(),\r\n  scrollEnd = $(\"html, body\").scrollTop(),\r\n  item = $(\".search-city__item_city\"),\r\n  falseText = $(\".search-city__item_nothing\"),\r\n  inputVal,\r\n  value,\r\n  quantity,\r\n  state,\r\n  flag;\r\n\r\n  //события\r\n  textInput.keyup(function () {\r\n    searchCity();\r\n  });\r\n\r\n  $(document).on('click touchstart', function (e) {\r\n    if (!flag) {\r\n      flag = true;\r\n      setTimeout(function () {\r\n        flag = false;\r\n      }, 300);\r\n      if (!cityBlock.is(e.target) && cityBlock.has(e.target).length === 0 && cityBlock.hasClass(\"search-city_visible\")) {\r\n        toggleModal();\r\n      } else if (openbutton.is(e.target) || openbutton.children().is(e.target)) {\r\n        toggleModal();\r\n      } \r\n    }\r\n  });\r\n\r\n  $(window).scroll(function () {\r\n    scrollEnd = $(\"html, body\").scrollTop();\r\n    if (((scrollEnd > (scrollStart + 100)) || ((scrollEnd < (scrollStart - 100)))) && state == true) {\r\n      toggleModal();\r\n    }\r\n  });\r\n\r\n  //функции\r\n  function scrollInit() {\r\n    list.niceScroll({\r\n      cursorcolor: cursorcolorVar,\r\n      cursorwidth: cursorwidthVar,\r\n      cursorborder: cursorborderVar,\r\n      cursorborderradius: cursorborderradiusVar,\r\n      zindex: zindexVar,\r\n      bouncescroll: bouncescrollVar,\r\n      autohidemode: false\r\n    });\r\n  };\r\n\r\n  //открытие или закрытие модалки\r\n  function toggleModal() {\r\n    scrollStart = $(\"html, body\").scrollTop();\r\n    cityBlock.toggleClass(\"search-city_visible\");\r\n    if (cityBlock.hasClass(\"search-city_visible\")) {\r\n      openbutton.addClass('mobile-button_active');\r\n      textInput.val(\"\");\r\n      searchCity();\r\n      cityBlock.fadeIn(300);\r\n      state = true;\r\n      scrollInit();\r\n      list.getNiceScroll().resize();\r\n    } else {\r\n      openbutton.removeClass('mobile-button_active');\r\n      cityBlock.fadeOut(300);\r\n      state = false;\r\n    }\r\n  };\r\n\r\n  //поиск\r\n  function searchCity() {\r\n    inputVal = textInput.val().toLowerCase();\r\n    if (inputVal.length >= 1) {\r\n      item.removeClass(\"search-city__item_active\");\r\n      item.each(function () {\r\n        value = $(this).attr('data-city').toLowerCase();\r\n        if (value.search(inputVal) != -1) {\r\n          $(this).addClass('search-city__item_active');\r\n        } \r\n      })\r\n      quantity = $(\".search-city__item_city.search-city__item_active\").length;\r\n      if (quantity < 1) {\r\n        falseText.addClass(\"search-city__item_active\");\r\n      } else {\r\n        falseText.removeClass(\"search-city__item_active\");\r\n      }\r\n    } else {\r\n      item.addClass(\"search-city__item_active\");\r\n      falseText.removeClass(\"search-city__item_active\");\r\n    }\r\n    list.getNiceScroll().resize();\r\n  };\r\n}\r\n//image-cover-box\r\nfunction cover() {\r\n  $('.cover-box').each(function() {\r\n    //set size\r\n    var th = $(this).height(),//box height\r\n        tw = $(this).width(),//box width\r\n        im = $(this).children('img'),//image\r\n        ih = im.height(),\r\n        iw = im.width();\r\n    if ((tw/th) >= (iw/ih)) {\r\n        im.addClass('ww').removeClass('wh');\r\n    } else {\r\n        im.addClass('wh').removeClass('ww');\r\n    }\r\n  });\r\n}\r\n\r\n//nav\r\nfunction nav() {\r\n  var navButton = $('.sub-nav__nav-open, .nav__close, .overlay'),\r\n    nav = $('.nav'),\r\n    navLink = $('.nav__link'),\r\n    overlay = $('.overlay');\r\n\r\n  navButton.click(function (event) {\r\n    event.preventDefault();\r\n    nav.toggleClass('nav_active');\r\n    navState();\r\n  })\r\n  \r\n  function navState() {\r\n    if (nav.hasClass('nav_active')) {\r\n      overlay.fadeIn(300);\r\n      scrollLock.hide($(\"body\"));\r\n      $('.page').addClass('page_fixed');\r\n    } else {\r\n      overlay.fadeOut(300);\r\n      scrollLock.show($(\"body\"));\r\n      $('.page').removeClass('page_fixed');\r\n    }\r\n  }\r\n  $(window).resize(function () {\r\n    if (innerWidth > 992) {\r\n      nav.removeClass('nav_active');\r\n      navState();\r\n    }\r\n  });\r\n  \r\n  navLink.on('click', function () {\r\n    if(innerWidth < 993) {\r\n      nav.removeClass('nav_active');\r\n      navState();\r\n    }\r\n  })\r\n}\r\n//lazy\r\nfunction lazy() {\r\n  $(\".lazy\").Lazy({\r\n    visibleOnly: true,\r\n    threshold: '',\r\n    effect: 'fadeIn',\r\n    effectTime: '300'\r\n  });\r\n}\r\n//tooltips\r\nfunction tooltip() {\r\n  $('.tooltip').tooltipster({\r\n    theme: 'tooltipster-light',\r\n    trigger:'custom',\r\n    animationDuration: 200,\r\n    trackerInterval: 100,\r\n    triggerOpen: {\r\n      click: true,  // For mouse\r\n      touchstart: true, // For touch device\r\n      mouseenter: true    // For touch device\r\n    },\r\n    triggerClose: {\r\n      click: true,  // For mouse\r\n      touchleave: true, // For touch device\r\n      mouseleave: true // For mouse\r\n    }\r\n  });\r\n}\r\nfunction slider() {\r\n  var slider = $('.slider');\r\n\r\n  slider.on('init', function () {\r\n    $(this).addClass('slider_visible')\r\n  });\r\n  \r\n  slider.each(function() {\r\n    var slideCount = 1,\r\n        slideCount1200 = 1,\r\n        slideCount992 = 1,\r\n        slideCount768 = 1,\r\n        slideCount576 = 1,\r\n        slideCount420 = 1,\r\n        arrows = false,\r\n        dots = false;\r\n\r\n    if($(this).hasClass('slider_dots')) {\r\n      dots = true;\r\n    }\r\n    if($(this).hasClass('slider_arrows')) {\r\n      arrows = true;\r\n    }\r\n    if($(this).hasClass('recommendations-slider')) {\r\n      slideCount = 6;\r\n      slideCount1200 = 5;\r\n      slideCount992 = 4;\r\n      slideCount768 = 3;\r\n      slideCount576 = 2;\r\n      slideCount420 = 1;\r\n    }\r\n    if($(this).hasClass('barbers__slider')) {\r\n      slideCount = 4;\r\n      slideCount1200 = 4;\r\n      slideCount992 = 3;\r\n      slideCount768 = 2;\r\n      slideCount576 = 1;\r\n      slideCount420 = 1;\r\n    }\r\n\r\n    $(this).slick({\r\n      infinite: true,\r\n      dots: dots,\r\n      arrows: arrows,\r\n      speed: 600,\r\n      slidesToShow: slideCount,\r\n      slidesToScroll: slideCount,\r\n      responsive: [\r\n        {\r\n          breakpoint: 1200,\r\n          settings: {\r\n            slidesToShow: slideCount1200,\r\n            slidesToScroll: slideCount1200\r\n          }\r\n        },\r\n        {\r\n          breakpoint: 992,\r\n          settings: {\r\n            slidesToShow: slideCount992,\r\n            slidesToScroll: slideCount992\r\n          }\r\n        },\r\n        {\r\n          breakpoint: 768,\r\n          settings: {\r\n            slidesToShow: slideCount768,\r\n            slidesToScroll: slideCount768\r\n          }\r\n        },\r\n        {\r\n          breakpoint: 576,\r\n          settings: {\r\n            slidesToShow: slideCount576,\r\n            slidesToScroll: slideCount576\r\n          }\r\n        },\r\n        {\r\n          breakpoint: 420,\r\n          settings: {\r\n            slidesToShow: slideCount420,\r\n            slidesToScroll: slideCount420\r\n          }\r\n        }\r\n      ]\r\n    });\r\n  });\r\n}\r\n//gallery\r\nfunction gallery() {\r\n  var row = $('.gallery__row:not(:first-child)'),\r\n      block = $('.gallery-block'),\r\n      title = $('.gallery-block_title'),\r\n      margin;\r\n\r\n  if(innerWidth>576) {\r\n    block.css('margin-top', '0');\r\n    row.each(function() {\r\n        margin = -($(this).height() / 2);\r\n        $(this).css('margin-top', margin);\r\n    }) \r\n  } else {\r\n    row.css('margin-top', '0');\r\n    block.each(function() {\r\n      margin = -($(this).height() / 2);\r\n      $(this).css('margin-top', margin);\r\n    })\r\n  }\r\n}"]}