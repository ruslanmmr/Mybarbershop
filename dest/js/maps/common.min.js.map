{"version":3,"sources":["common.js"],"names":["$","document","ready","lazy","tooltip","nav","cityBlock","gallery","resize","innerWidth","window","cursorcolorVar","cursorwidthVar","cursorborderVar","cursorborderradiusVar","zindexVar","inputVal","state","flag","openbutton","textInput","list","scrollStart","scrollTop","scrollEnd","item","falseText","toggleClass","hasClass","addClass","val","searchCity","fadeIn","cursorwidth","cursorborder","cursorborderradius","zindex","bouncescroll","bouncescrollVar","autohidemode","getNiceScroll","removeClass","fadeOut","toLowerCase","attr","search","value","length","on","e","setTimeout","toggleModal","is","target","has","children","scroll","navButton","navLink","overlay","navState","event","preventDefault","hide","scrollLock","click","visibleOnly","threshold","effect","effectTime","tooltipster","animationDuration","trackerInterval","triggerOpen","touchstart","mouseenter","trigger","slider","triggerClose","touchleave","slideCount","mouseleave","slideCount992","slideCount768","slideCount576","slideCount420","arrows","dots","each","slideCount1200","this","slick","infinite","speed","slidesToShow","slidesToScroll","settings","responsive","breakpoint","margin","block","css","row","height","title"],"mappings":"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","file":"../common.min.js","sourcesContent":["$(document).ready(function () {\r\n  lazy();\r\n  tooltip();\r\n  nav();\r\n  cityBlock();\r\n  slider();\r\n  gallery();\r\n});\r\n$(window).resize(function () {\r\n  innerWidth = $('body').innerWidth();\r\n  gallery();\r\n});\r\n\r\n//global variables\r\nvar innerWidth = $('body').innerWidth(),\r\n    //scroll-styling\r\n    cursorcolorVar = \"#fff\",\r\n    cursorwidthVar = \"7px\",\r\n    cursorborderVar = \"0\",\r\n    cursorborderradiusVar = \"0\",\r\n    zindexVar = [100],\r\n    bouncescrollVar = false;\r\n    //\r\n\r\n//city-block\r\nfunction cityBlock() {\r\n  var openbutton = $(\".sub-nav__link_city\"),\r\n  textInput = $('.search-city__input'),\r\n  list = $('.search-city__list'),\r\n  cityBlock = $(\".search-city\"),\r\n  scrollStart = $(\"html, body\").scrollTop(),\r\n  scrollEnd = $(\"html, body\").scrollTop(),\r\n  item = $(\".search-city__item_city\"),\r\n  falseText = $(\".search-city__item_nothing\"),\r\n  inputVal,\r\n  value,\r\n  quantity,\r\n  state,\r\n  flag;\r\n\r\n  //события\r\n  textInput.keyup(function () {\r\n    searchCity();\r\n  });\r\n\r\n  $(document).on('click touchstart', function (e) {\r\n    if (!flag) {\r\n      flag = true;\r\n      setTimeout(function () {\r\n        flag = false;\r\n      }, 300);\r\n      if (!cityBlock.is(e.target) && cityBlock.has(e.target).length === 0 && cityBlock.hasClass(\"search-city_visible\")) {\r\n        toggleModal();\r\n      } else if (openbutton.is(e.target) || openbutton.children().is(e.target)) {\r\n        toggleModal();\r\n      } \r\n    }\r\n  });\r\n\r\n  $(window).scroll(function () {\r\n    scrollEnd = $(\"html, body\").scrollTop();\r\n    if (((scrollEnd > (scrollStart + 100)) || ((scrollEnd < (scrollStart - 100)))) && state == true) {\r\n      toggleModal();\r\n    }\r\n  });\r\n\r\n  //функции\r\n  function scrollInit() {\r\n    list.niceScroll({\r\n      cursorcolor: cursorcolorVar,\r\n      cursorwidth: cursorwidthVar,\r\n      cursorborder: cursorborderVar,\r\n      cursorborderradius: cursorborderradiusVar,\r\n      zindex: zindexVar,\r\n      bouncescroll: bouncescrollVar,\r\n      autohidemode: false\r\n    });\r\n  };\r\n\r\n  //открытие или закрытие модалки\r\n  function toggleModal() {\r\n    scrollStart = $(\"html, body\").scrollTop();\r\n    cityBlock.toggleClass(\"search-city_visible\");\r\n    if (cityBlock.hasClass(\"search-city_visible\")) {\r\n      openbutton.addClass('mobile-button_active');\r\n      textInput.val(\"\");\r\n      searchCity();\r\n      cityBlock.fadeIn(300);\r\n      state = true;\r\n      scrollInit();\r\n      list.getNiceScroll().resize();\r\n    } else {\r\n      openbutton.removeClass('mobile-button_active');\r\n      cityBlock.fadeOut(300);\r\n      state = false;\r\n    }\r\n  };\r\n\r\n  //поиск\r\n  function searchCity() {\r\n    inputVal = textInput.val().toLowerCase();\r\n    if (inputVal.length >= 1) {\r\n      item.removeClass(\"search-city__item_active\");\r\n      item.each(function () {\r\n        value = $(this).attr('data-city').toLowerCase();\r\n        if (value.search(inputVal) != -1) {\r\n          $(this).addClass('search-city__item_active');\r\n        } \r\n      })\r\n      quantity = $(\".search-city__item_city.search-city__item_active\").length;\r\n      if (quantity < 1) {\r\n        falseText.addClass(\"search-city__item_active\");\r\n      } else {\r\n        falseText.removeClass(\"search-city__item_active\");\r\n      }\r\n    } else {\r\n      item.addClass(\"search-city__item_active\");\r\n      falseText.removeClass(\"search-city__item_active\");\r\n    }\r\n    list.getNiceScroll().resize();\r\n  };\r\n}\r\n\r\n//nav\r\nfunction nav() {\r\n  var navButton = $('.sub-nav__nav-open, .nav__close, .overlay'),\r\n    nav = $('.nav'),\r\n    navLink = $('.nav__link'),\r\n    overlay = $('.overlay');\r\n\r\n  navButton.click(function (event) {\r\n    event.preventDefault();\r\n    nav.toggleClass('nav_active');\r\n    navState();\r\n  })\r\n  \r\n  function navState() {\r\n    if (nav.hasClass('nav_active')) {\r\n      overlay.fadeIn(300);\r\n      scrollLock.hide($(\"body\"));\r\n      $('.page').addClass('page_fixed');\r\n    } else {\r\n      overlay.fadeOut(300);\r\n      scrollLock.show($(\"body\"));\r\n      $('.page').removeClass('page_fixed');\r\n    }\r\n  }\r\n  $(window).resize(function () {\r\n    if (innerWidth > 992) {\r\n      nav.removeClass('nav_active');\r\n      navState();\r\n    }\r\n  });\r\n  \r\n  navLink.on('click', function () {\r\n    if(innerWidth < 993) {\r\n      nav.removeClass('nav_active');\r\n      navState();\r\n    }\r\n  })\r\n}\r\n//lazy\r\nfunction lazy() {\r\n  $(\".lazy\").Lazy({\r\n    visibleOnly: true,\r\n    threshold: '',\r\n    effect: 'fadeIn',\r\n    effectTime: '300'\r\n  });\r\n}\r\n//tooltips\r\nfunction tooltip() {\r\n  $('.tooltip').tooltipster({\r\n    theme: 'tooltipster-light',\r\n    trigger:'custom',\r\n    animationDuration: 200,\r\n    trackerInterval: 100,\r\n    triggerOpen: {\r\n      click: true,  // For mouse\r\n      touchstart: true, // For touch device\r\n      mouseenter: true    // For touch device\r\n    },\r\n    triggerClose: {\r\n      click: true,  // For mouse\r\n      touchleave: true, // For touch device\r\n      mouseleave: true // For mouse\r\n    }\r\n  });\r\n}\r\nfunction slider() {\r\n  var slider = $('.slider');\r\n\r\n  slider.on('init', function () {\r\n    $(this).addClass('slider_visible')\r\n  });\r\n  \r\n  slider.each(function() {\r\n    var slideCount = 1,\r\n        slideCount1200 = 1,\r\n        slideCount992 = 1,\r\n        slideCount768 = 1,\r\n        slideCount576 = 1,\r\n        slideCount420 = 1,\r\n        arrows = false,\r\n        dots = false;\r\n\r\n    if($(this).hasClass('slider_dots')) {\r\n      dots = true;\r\n    }\r\n    if($(this).hasClass('slider_arrows')) {\r\n      arrows = true;\r\n    }\r\n    if($(this).hasClass('recommendations-slider')) {\r\n      slideCount = 6;\r\n      slideCount1200 = 5;\r\n      slideCount992 = 4;\r\n      slideCount768 = 3;\r\n      slideCount576 = 2;\r\n      slideCount420 = 1;\r\n    }\r\n\r\n    $(this).slick({\r\n      infinite: true,\r\n      dots: dots,\r\n      arrows: arrows,\r\n      speed: 600,\r\n      slidesToShow: slideCount,\r\n      slidesToScroll: slideCount,\r\n      responsive: [\r\n        {\r\n          breakpoint: 1200,\r\n          settings: {\r\n            slidesToShow: slideCount1200,\r\n            slidesToScroll: slideCount1200\r\n          }\r\n        },\r\n        {\r\n          breakpoint: 992,\r\n          settings: {\r\n            slidesToShow: slideCount992,\r\n            slidesToScroll: slideCount992\r\n          }\r\n        },\r\n        {\r\n          breakpoint: 768,\r\n          settings: {\r\n            slidesToShow: slideCount768,\r\n            slidesToScroll: slideCount768\r\n          }\r\n        },\r\n        {\r\n          breakpoint: 576,\r\n          settings: {\r\n            slidesToShow: slideCount576,\r\n            slidesToScroll: slideCount576\r\n          }\r\n        },\r\n        {\r\n          breakpoint: 420,\r\n          settings: {\r\n            slidesToShow: slideCount420,\r\n            slidesToScroll: slideCount420\r\n          }\r\n        }\r\n      ]\r\n    });\r\n  });\r\n}\r\n//gallery\r\nfunction gallery() {\r\n  var row = $('.gallery__row:not(:first-child)'),\r\n      block = $('.gallery-block'),\r\n      title = $('.gallery-block_title'),\r\n      margin;\r\n\r\n  if(innerWidth>576) {\r\n    block.css('margin-top', '0');\r\n    row.each(function() {\r\n        margin = -($(this).height() / 2);\r\n        $(this).css('margin-top', margin);\r\n    }) \r\n  } else {\r\n    row.css('margin-top', '0');\r\n    block.each(function() {\r\n      margin = -($(this).height() / 2);\r\n      $(this).css('margin-top', margin);\r\n    })\r\n  }\r\n}"]}